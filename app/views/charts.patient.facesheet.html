<div id="CHARTS_PATIENT_FACESHEET" class="view">
	<div class="row controls border_b_blue">
		<div class="col-xs-3">
			<select class="select_show" ng-model="showing">
				<option>Show...</option>
        <option>CDS</option>
        <option>Notifications</option>
			</select>
		</div>
		<div class="col-xs-4">
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Search">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button"><img src="images/search_icon.png"></button>
				</span>
			</div>
		</div>

		<div class="col-xs-5 text-right">
			<button class="button_orange">Start Encounter</button>
		</div>
	</div>

	<div class="cds" ng-class="{cds_open:showCDS}">
    <div class="row">
      <div class="col-xs-9">{{patient.cds.cds}}</div>
      <div class="col-xs-2">
        <a ng-click="cdsMore=true">Learn More</a>
      </div>
      <div class="col-xs-1 text-right">
        <a class="button_close" ng-click="showCDS=!showCDS"><img src="images/icon_close.png"></a>
      </div>
    </div>
    <div ng-show="cdsMore">
      <div class="row">
        <p class="col-xs-12">Intervention Developer: {{patient.cds.interventor}}</p>
      </div>
      <div class="row">
        <p class="col-xs-12">Citation: {{patient.cds.citor}}</p>
      </div>
      <div class="row">
        <p class="col-xs-12">Sponsored By: {{patient.cds.sponsor}}</p>
      </div>
    </div>
  </div>

  <div class="notifications" ng-class="{notifications_open:notifications.length > 0}">
    <div class="row" ng-class="{notifications_reduced: editor}">
      <div class="col-xs-9">
        <p class="div class="section_row"_track">{{notifications[notificationIndex].path}}</p>
        <p>{{notifications[notificationIndex].description}}</p>
      </div>
      <div class="col-xs-3 text-right">
        <a ng-click="nextNotification()">{{notifications.length}} remaining</a>
      </div>
    </div>
  </div>

	<div class="body" ng-class="{body_reduced: editor}">
		<div class="content scroll">
			<section id="medicatons">
				<div class="section_row">
					<h1>Medications</h1>
				</div>
				<ul>
					<li class="section_row_indent" ng-repeat="med in patient.medications | orderBy:'date'">
						<span><a ng-click="showEditor('Editor')">{{med.name}}</a></span>
						<span>{{med.method}}</span>
						<span>{{med.dosage}}</span>
						<span class="light">{{med.doctor}}</span>
						<span>{{med.date | date:'MM/dd/yyyy'}}</span>
						<span>{{med.refill}}</span>
					</li>
				</ul>
			</section>
			<section id="problem_list">
				<div class="section_row">
					<h1>Problem List</h1>
				</div>
				<ul>
					<li class="section_row_indent" ng-repeat="problem in patient.problems | orderBy:'date'">
						<span><a ng-click="showEditor('Editor')">{{problem.name}}</a></span>
						<span class="light">{{problem.metric}}</span>
						<span>{{problem.doctor}}</span>
						<span>{{problem.date | date:'MM/dd/yyyy'}}</span>
					</li>
				</ul>
			</section>
			<section id="medical_history">
				<div class="section_row">
					<h1>Medical History</h1>
				</div>
				<ul>
					<li class="section_row_indent" ng-repeat="med in patient.medicalHistory | orderBy:'date'">
						<span><a ng-click="showEditor('Editor')">{{med.name}}</a></span>
						<span class="light">{{med.metric}}</span>
						<span>{{med.doctor}}</span>
						<span>{{med.date | date:'MM/dd/yyyy'}}</span>
					</li>
				</ul>
			</section>
			<section id="surgical_history">
				<div class="section_row">
					<h1>Surgical History</h1>
				</div>
				<ul>
					<li class="section_row_indent" ng-repeat="sur in patient.surgicalHistory | orderBy:'date'">
						<span><a ng-click="showEditor('Editor')">{{sur.name}}</a></span>
						<span class="light">{{sur.metric}}</span>
						<span>{{sur.doctor}}</span>
						<span>{{sur.date | date:'yyyy'}}</span>
					</li>
				</ul>
			</section>
			<section id="family_history">
				<div class="section_row">
					<h1>Family History</h1>
				</div>
				<ul>
					<li class="section_row_indent" ng-repeat="fam in patient.familyHistory | orderBy:'name'">
						<span><a ng-click="showEditor('Editor')">{{fam.name}}</a></span>
						<span>{{fam.relation}}</span>
						<span class="light">Age {{fam.date | age}}</span>
					</li>
				</ul>
			</section>
			<section id="social_history">
				<div class="section_row">
					<h1>Social History</h1>
				</div>
				<ul>
					<li class="section_row_indent" ng-repeat="soc in patient.socialHistory | orderBy:'name'">
						<span><a ng-click="showEditor('Editor')">{{soc.name}}</a></span>
						<span>{{soc.info}}</span>
						<span class="light">{{soc.detail}}</span>
					</li>
				</ul>
			</section>
			<section id="daily_living">
				<div class="section_row">
					<h1>Daily Living</h1>
				</div>
				<ul>
					<li class="section_row_indent">None Recorded</li>
				</ul>
			</section>
			<section id="advisories">
				<div class="section_row">
					<h1>Advisories</h1>
				</div>
				<ul>
					<li class="section_row_indent">
						<span>No smoking status recorded</span>
						<span><a>Record</a></span>
					</li>
					<li class="section_row_indent">
						<span>BP may not be adequately controlled</span>
						<span class="orange">Last recorded BP 142/94 (today)</span>
						<span><a>Document Plan</a></span>
					</li>
					<li class="section_row_indent">
						<span>High risk medication for patients over 65 years old</span>
						<span class="orange">Ativan</span>
						<span><a>Document Reason</a></span>
					</li>
				</ul>
			</section>
			<section id="psych_assessment">
				<div class="section_row">
          <h1>Psychological Assessment</h1>
        </div>
        <ul>
          <li class="section_row_indent" ng-repeat="psych in patient.psychAssessments | orderBy:'date'">
            <span><a ng-click="showEditor('Editor')">{{psych.name}}</a></span>
            <span>{{psych.doctor}}</span>
            <span class="light">{{psych.date | date:'yyyy'}}</span>
          </li>
        </ul>
			</section>
			<section id="orders">
        <div class="section_row">
            <h1>Orders</h1>
            <div class="section_row_menu"> 
              <select class="select_editor_blue select_no_border" ng-model="orderTypes.value" ng-options="o.value as o.label for o in   orderTypes.options"></select>
            </div>
        </div>
        <!-- INPUT: ADD LAB -->
        <div class="section_row editor_source" ng-show="editor.type=='lab_selection'">
          <div class="select_lab_input">
            <div class="input-group">
              <!-- INPUT: ADD LAB -->
                <input type="text" class="form-control" placeholder="Add a lab" ng-model="selectedLab" typeahead="lab as lab.name for lab in model.labs | filter:$viewValue" typeahead-on-select="addLabOrder(selectedLab)">
              <span class="input-group-btn">
                <button class="btn btn-default" type="button"><img src="images/icon_list.png"></button>
              </span>
            </div>
          </div>
        </div>
        <!-- DRAFTS -->
        <div class="section_row">
          <h2>Drafts</h2>
        </div>
        <ul>
          <li class="section_row_indent" ng-repeat="order in patient.orders | filter:{sent: false}">
            <h3 ng-class="{editor_source:checkEditorSelectionForOrder(order)}">
              <a ng-click="showOrder(order)" ui-keydown="{9:'test($event)'}">{{order.lab.name}}</a>
              <span><button class="button_text" type="button" ng-disabled="hasNotification(order.id)" ng-click="submitOrder(order)">Send</button></span>
              <span class="incomplete" ng-show="hasNotification(order.id)">Incomplete</span>
            </h3>
            <ul>
              <li ng-repeat="test in order.tests">
                <h4 ng-class="{editor_source:checkEditorSelectionForTest(test,order)}">
                  <a ng-click="showTest(test, order)">{{test.name}}</a>
                  <span class="incomplete" ng-show="hasNotification(test.id)">Incomplete</span>
                </h4>
              </li>
              <li class="section_row_indent" ng-class="{editor_source:editor.type=='lab_test_selection'}">
                <div class="select_lab_input">
                  <div class="input-group" ng-show="order.id == selected_order.id">
                      <input type="text" class="form-control" ui-event="{focus:'onFocus()'}" placeholder="Add a test" ng-model="test" typeahead="test as test.name for test in model.lab_tests | filter:$viewValue" typeahead-on-select="addTest(test)">
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button"><img src="images/icon_list.png"></button>
                    </span>
                  </div>
                </div>
              </li>            
            </ul>
          </li>
        </ul>
        <!-- PENDING -->
        <div class="section_row">
          <h2>Pending</h2>
        </div>
        <ul>
          <li class="section_row_indent" ng-repeat="order in patient.orders | filter:{sent: true}">
            <h3 ng-class="{editor_source:checkEditorSelectionForOrder(order)}">
              <a ng-click="showOrder(order)">{{order.lab.name}}</a>
            </h3>
            <ul>
              <li ng-repeat="test in order.tests">
                <h4 ng-class="{editor_source:checkEditorSelectionForTest(test,order)}">
                  <a ng-click="showTest(test, order)">{{test.name}}</a>
                </h4>
              </li>
              <li class="section_row_indent" ng-class="{editor_source:editor.type=='lab_test_selection'}">
                <div class="select_lab_input">
                  <div class="input-group" ng-show="order.id == selected_order.id">
                      <input type="text" class="form-control" ui-event="{focus:'onFocus()'}" ui-keypress="{13:'test($event)'}" placeholder="Add a test" ng-model="test" typeahead="test as test.name for test in model.lab_tests | filter:$viewValue" typeahead-on-select="addTest(test)">
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button"><img src="images/icon_list.png"></button>
                    </span>
                  </div>
                </div>
              </li>                        
            </ul>
          </li>
        </ul>
			</section>
			<section id="clinical_summary">
				<div class="section_row">
					<h1>Clinical Summary</h1>
				</div>
				<ul>
					<li class="section_row_indent">None Recorded</li>
				</ul>
			</section>
		</div>

		<div class="editors" ng-show="editor">
			<editor-lab-selection class="editor_container" ng-show="editor.type=='lab_selection'"></editor-lab-selection>
			<editor-lab-detail class="editor_container" ng-show="editor.type=='lab_detail'"></editor-lab-detail>
			<editor-lab-test-selection class="editor_container" ng-show="editor.type=='lab_test_selection'"></editor-lab-test-selection>
			<editor-lab-test-detail class="editor_container" ng-show="editor.type=='lab_test_detail'"></editor-lab-test-detail>
		</div>		
	</div>
</div>